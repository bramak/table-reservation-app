<!DOCTYPE html>
<html>
  <head>
    <title>Restaraunts</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="style.css" />
  </head>
  <script src="../../utils/detailsscripts.js"></script>
  <body>
    
    <div class="tab" id="mytab">
      <button class="hamburgermenu" onclick="tablinksdrop()"><img src="../../imageicondata/hamburger.png" width="20" height="20" class="price_tag" /></button>
      <div id="btn" class="tablinks">
        <div id="top"></div>
        <div id="middle"></div>
        <div id="bottom"></div>
      </div>
      <button class="tablinks" onclick="openpage(event, 'Restaraunts')">
        Restaraunts
      </button>
      <button class="tablinks" onclick="openpage(event, 'About-Us')">
        About US
      </button>
    </div>
   
    <div id="Restaraunts" class="tabcontent" id="defaultOpen">
     <!-- <button onclick="openNav()">Filter</button> -->
      <div id="headerdetails" class="flex-container"></div>
    </div>
    <div id="About-Us" class="tabcontent">About-Us</div>

    <div id="testmenu" class="sidetab">
      <a href="javascript:void(0)" class="closebtn" onclick="tablinksclose()">×</a>
      <ul class="no-bullets">
      <li><button class="sidetablinks" onclick="openpage(event, 'Restaraunts')" id="defaultOpen"> 
        Restaraunts
      </button></li>
        <li>
      <button class="sidetablinks" onclick="openpage(event, 'About-Us')">
        About US
      </button></li></ul>
    </div>

    <!--filterpage, sidebar to be integrated-->
    <div id="box">
      <div id="items">
        <div class="item"><form>
          <label for="priceval"></label><img src="../../imageicondata/price_tag.png" width="16" height="16" class="price_tag" /></label>
          <select name="priceval" id="priceval">
            <option value="6">6</option>
            <option value="5">5</option>
            <option value="2">4</option>
            <option value="3">3</option>
            <option value="4">2</option>
            <option value="1">1</option>
          </select><br>
          <label for="rating"><img src="../../imageicondata/star.svg" width="16" height="16" /></label>
          <select name="rating" id="rating">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
          </select>
          <label class="container">Restaraunt Reservations
            <input type="checkbox" name="restarauntreservations" id="restarauntreservations">
            <span class="checkmark"></span>
        </label>
        <label class="container">Has Alcohol
          <input type="checkbox" name="alcohol" id="alcohol">
          <span class="checkmark"></span>
      </label>
      <label class="container">Delivery
        <input type="checkbox" name="delivery" id="delivery">
        <span class="checkmark"></span>
    </label>
    <label class="container">Take Out
      <input type="checkbox" name="takeout" id="takeout">
      <span class="checkmark"></span>
  </label>
    <label for="reviewsmin">Reviews</label>
          <select name="reviewsmin" id="reviewsmin">
            <option value="0">0+</option>
            <option value="10">10+</option>
            <option value="50">50+</option>
            <option value="100">100+</option>
          </select>
  <button type="button" id="FilterResults" onclick="filterresults()">Filter Results</button>
        </form></div>
      </div>
    </div>
    

    <!--filterpage sidebar- to be phased out-->
    <div id="mySidebar" class="sidebar">
      <a href="javascript:void(0)" class="closebtn" onclick="closeNav()">×</a>
      <div class="info">
        Choose Your Filters
        <br>
        <form>
          <label for="priceval"></label><img src="../../imageicondata/price_tag.png" width="16" height="16" class="price_tag" /></label>
          <select name="priceval" id="priceval">
            <option value="6">6</option>
            <option value="5">5</option>
            <option value="2">4</option>
            <option value="3">3</option>
            <option value="4">2</option>
            <option value="1">1</option>
          </select><br>
          <label for="rating"><img src="../../imageicondata/star.svg" width="16" height="16" /></label>
          <select name="rating" id="rating">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
          </select>
          <label class="container">Restaraunt Reservations
            <input type="checkbox" name="restarauntreservations" id="restarauntreservations">
            <span class="checkmark"></span>
        </label>
        <label class="container">Has Alcohol
          <input type="checkbox" name="alcohol" id="alcohol">
          <span class="checkmark"></span>
      </label>
      <label class="container">Delivery
        <input type="checkbox" name="delivery" id="delivery">
        <span class="checkmark"></span>
    </label>
    <label class="container">Take Out
      <input type="checkbox" name="takeout" id="takeout">
      <span class="checkmark"></span>
  </label>
    <label for="reviewsmin">Reviews</label>
          <select name="reviewsmin" id="reviewsmin">
            <option value="0">0+</option>
            <option value="10">10+</option>
            <option value="50">50+</option>
            <option value="100">100+</option>
          </select>
  <button type="button" id="FilterResults" onclick="filterresults()">Filter Results</button>
        </form>
        
      </div>
     <!-- <div id="filteredresults" class="flex-container"></div>-->
    </div>

    <script>
          var checkoffiler=0;
          var pricerangeval=6;
          var ratingval=0;
          var reviewsmin=0;
          var restresvermanditory=false;
          var alcoholmanditory=false;
          var hasdeliverymanditory=false;
          var takeOutmanditory=false;

      // List Element
      const ul = document.querySelector("#business");

      // API URL
      const url = "http://localhost:3001/business";

      var valuere=3;
      var price=0;
      // make the API call
      fetch(url)
        .then((res) => res.json())
        .then((data) => {
          // iterate over items
          const listitems = data.forEach((item) => {
            // create the elements
            
          const tile2=`loadingissues`;  
            const tile = `
            
          <div class="tile">
            ${item.stars}
                <div class="mainbox">
                <div class="imgclass"><img class="image" src="${item.thumbnail}" alt="loading image please wait" onerror=this.src="../../imageicondata/food.png" /></div>
                <div class="overlay"></div>
                <div class="buttonoverlay">
                <div class="restname">${item.name}</div>
                <div class="ratingbox">
                <img src="../../imageicondata/star.svg" width="16" height="16" /> ${item.stars}
                </div>
                </div>
                </div>
                <form action="../restaraunt-descriptions/index.html#/${item.business_id}">
                <div class="bottommain">
                <button type="submit" class="button">View Details</button></form>
                </div>
                <br><br><br><br>
        </div>
        `;
            console.log(item); 
            document
              .getElementById("headerdetails")
              .appendChild(createElementFromHTML(tile));
   
          });
        })
        .catch((err) => {
          console.error("Error: ", err);
        });


      document.getElementById("defaultOpen").click(); 

      //sidebar
      function openNav() {
        document.getElementById("mySidebar").style.width = "250px";
        document.getElementById("main").style.marginLeft = "250px";
      }

      function openNavresults() {
        document.getElementById("mySidebar").style.width = "100%";
        document.getElementById("main").style.marginLeft = "250px";
      }

      function closeNav() {
        document.getElementById("mySidebar").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
      }

      //menu
      function tablinksdrop() {
        document.getElementById("testmenu").style.width = "150px";
        document.getElementById("main").style.marginLeft = "150px";
      }

      function tablinksclose() {
        document.getElementById("testmenu").style.width = "0";
        document.getElementById("main").style.marginLeft = "0";
      }


      //filter display
      const tilefiler=`<div>filers</div>`;

      function filterresults(){
        checkoffiler=1;
         pricerangeval=6;
           ratingval=3;
          reviewsmin=0;
          restresvermanditory=false;
          alcoholmanditory=false;
         hasdeliverymanditory=false;
          takeOutmanditory=false;
        //  openNavresults();
         // document.getElementById("filteredresult").appendChild(createElementFromHTML(tile));
        
      }

//other filtersidebar-inuse

var sidebarBox = document.querySelector('#box');
var sidebarBtn = document.querySelector('#btn');
var pageWrapper = document.querySelector('#main-content');

sidebarBtn.addEventListener('click', function(event) {

  if (this.classList.contains('active')) {
      this.classList.remove('active');
      sidebarBox.classList.remove('active');
  } else {
      this.classList.add('active');
      sidebarBox.classList.add('active');
  }
});

pageWrapper.addEventListener('click', function(event) {

  if (sidebarBox.classList.contains('active')) {
      sidebarBtn.classList.remove('active');
      sidebarBox.classList.remove('active');
  }
});

window.addEventListener('keydown', function(event) {

  if (sidebarBox.classList.contains('active') && event.keyCode === 27) {
      sidebarBtn.classList.remove('active');
      sidebarBox.classList.remove('active');
  }
});
    </script>
  </body>
</html>
